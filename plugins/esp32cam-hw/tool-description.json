{
  "name": "esp32cam-hw",
  "description": "ESP32-CAM 硬體插件，提供相機拍照、伺服馬達與 IR 控制。",
  "tools": [
    {
      "name": "camera.capture",
      "description": "觸發 ESP32-CAM 拍照並回傳影像資料。",
      "parameters": {
        "type": "object",
        "properties": {},
        "required": []
      },
      "returns": {
        "type": "object",
        "properties": {
          "ok": { "type": "boolean" },
          "code": { "type": "string" },
          "message": { "type": "string" },
          "data": {
            "type": "object",
            "properties": {
              "mime": { "type": "string" },
              "imageBase64": { "type": "string" },
              "capturedAt": { "type": "string" }
            }
          }
        }
      }
    },
    {
      "name": "servo.rotate",
      "description": "控制指定軸向的伺服馬達順時針/逆時針旋轉。",
      "parameters": {
        "type": "object",
        "properties": {
          "axis": { "type": "string", "enum": ["pan", "tilt"] },
          "dir": { "type": "string", "enum": ["cw", "ccw"] },
          "step": { "type": "number", "description": "可選，微調步數" },
          "ms": { "type": "number", "description": "可選，持續時間 (ms)" }
        },
        "required": ["axis", "dir"]
      },
      "returns": {
        "type": "object",
        "properties": {
          "ok": { "type": "boolean" },
          "code": { "type": "string" },
          "message": { "type": "string" },
          "data": { "type": "object" }
        }
      }
    },
    {
      "name": "ir.receive",
      "description": "啟動/停止 IR 接收或取得最近一次接收到的 IR 內容。",
      "parameters": {
        "type": "object",
        "properties": {
          "action": { "type": "string", "enum": ["start", "stop", "last"] }
        },
        "required": []
      },
      "returns": {
        "type": "object",
        "properties": {
          "ok": { "type": "boolean" },
          "code": { "type": "string" },
          "message": { "type": "string" },
          "data": { "type": "object" }
        }
      }
    },
    {
      "name": "ir.send",
      "description": "以指定協定或 raw pulses 發射 IR code。",
      "parameters": {
        "type": "object",
        "properties": {
          "format": { "type": "string", "enum": ["nec", "raw", "rc5", "rc6", "sony"] },
          "value": { "type": "number" },
          "bits": { "type": "number" },
          "raw": { "type": "array", "items": { "type": "number" } }
        },
        "required": ["format"]
      },
      "returns": {
        "type": "object",
        "properties": {
          "ok": { "type": "boolean" },
          "code": { "type": "string" },
          "message": { "type": "string" },
          "data": { "type": "object" }
        }
      }
    },
    {
      "name": "device.status",
      "description": "取得 ESP32-CAM 狀態資訊。",
      "parameters": {
        "type": "object",
        "properties": {},
        "required": []
      },
      "returns": {
        "type": "object",
        "properties": {
          "ok": { "type": "boolean" },
          "code": { "type": "string" },
          "message": { "type": "string" },
          "data": { "type": "object" }
        }
      }
    }
  ]
}
